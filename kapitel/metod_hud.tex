\section{Hud- och handidentifiering}

\subsection{Klassificering av hud}
\notes{44 bilder?? gjorde Elmezain detta?}
I 44 bilder tagna med webbkameran separerades huden från resten av
bilden manuellt med hjälp av fotoredigeringsprogramvara. Baserat på
dessa bildpunkter bestämdes sedan en sannolikhetsfördelning för både hud
och icke-hud enligt kapitel \ref{sec:hudklassificering}). 

Med hjälp av
sannolikhetsfördelningarna delades kamerabilden in i hud
resp.~ickehud, så att resultatet kunde bedömas. För att inte behöva
räkna ut sannolikheten för färgen i varje bildpunkt och bildruta
som analyseras,
vilket hade krävt lång beräkningstid, gjordes beräkningen
i förväg för varje tänkbar färg ($256^2$ stycken i
$C_bC_r$-rymden). Resultaten sparades
sedan i två\notes{två?} $256\times256$-matriser, där färgvärdet används som
koordinater. Ett antal binära matriser skapades sedan med ettor på de
positioner där klassificeringskravet 
\begin{equation*}
	\frac{\Prob(\textrm{färg}|\textrm{hud})}{\Prob(\textrm{färg}|\textrm{ickehud})} > c,
\end{equation*}
var uppfyllt för olika värden på konstanten c. Detta resulterade alltså i mer
eller mindre inklusiva tolkningar av vad som är hudfärg. I dessa matriser, eller
''hudfärgskartor'', kunde man sedan slå upp
färgvärden för att direkt få veta sannolikheten för att dessa är
hud. \notes{få veta om desssa ska klassas som hud. (låter bättre?)}
De olika kartorna testades, och den som gav en så bra bild av
handen som möjligt utan att ta med stora bakgrundsområden användes.
Metoden med hudfärgskartor har visats vara effektiv av bl.a.~\citeasnoun{Brand00}

Resultatet jämfördes sedan med det som ficks med
sannolikhetsfördelningarna framtagna av \citeasnoun{Elmezain08} men
med samma metod.\notes{What?!}

\subsection{Urskiljning av handen}\label{sec:metod_hud:urskiljning}
\notes{Håll i dig, nu blir det presens! Kan vi variera tempus fram och tillbaka?}
När väl hudbildpunkterna i figuren urskiljts återstår att 
identifiera handen som ska följas. Det är troligt att man i bilden
fått med ett antal mindre områden som felaktigt bedömts vara
hud. Dessutom är huvudet ofta med i bilden, vilket kan ställa till med
problem. 

Vår lösning på problemet är att först använda den inbyggda
matlabfunktionen \texttt{bwareaopen}, som är en morfologisk
öppningsfunktion. Metoden som beskrivs i
\ref{sec:morph} använder ett strukturelement $S$, som \texttt{bwareaopen}
genererar utifrån en parameter som specificerar
dess area --- vad som är en lämplig area
varierar med upplösning och
och avstånd till kameran. Notera att \texttt{bwareaopen} opererar på mängden av
vita bildpunkter, inte svarta som operationerna i \ref{sec:morph}, varför
resultatet kommer att likna figur~\ref{fig:morph:cl} istället för
figur~\ref{fig:morph:op}.
\notes{Är detta sant efter att skåning bytte svarta och vita i morfkapitlet?}
Vi använder en gräns på 200
bildpunkter; detta fungerar bra även för relativt stort avstånd till
kameran med en upplösning på $320\times240$ bildpunkter.

För att hitta handen gör vi antagandet att handen är det
objekt som befinner sig längst till vänster i bilden.
Vi itererar därför över bildens kolonner från
höger för att se om kolonnen innehåller någon hudbildpunkt --- den första
hudbildpunkten som nås på detta sätt antas tillhöra handen.
Det sammanhängande område som bildpunkten är en del av antas därför vara
den sökta handen.
Att på detta sätt välja objektet längst till vänster av de
intressanta har tidigare gjorts av bl.a. \citeasnoun{Nielsen04}. De använde
sig dock av det högra av de två största sammanhängande objekten,
vilket har fördelen att man inte behöver sätta en manuell gräns för
när ett objekt är ''tillräckligt stort''. Till nackdelarna hör
att man tvingas
söka igenom hela bilden, att den är något svårare att
implementera samt att den endast fungerar då både huvud och hand finns
i bilden.

En alternativ metod som letar från
höger är lätt att implementera om man vill kunna använda programmet
som vänsterhänt --- detta kommer dock att kräva en
separat inlärningsmängd till gestigenkänningen. \notes{Kan man inte bara
spegelvända bilden?}

Metoden plockar med all hud som hänger samman med
handen, vilket när personen framför kameran bär en kortärmad tröja inkluderar
armen. För att
kringgå detta kan man identifiera handleden och kapa handen
där. Detta har gjordes av \citeasnoun{Deimel99} genom att identifiera den 
största cirkel
som får plats helt i handen, som antas vara centrerad mitt i handen. Då
cirkeln förstoras något är det längsta cirkelsegment som helt får
plats i hudområdet placerat vid handleden, och mittpunktstangenten
till segmentet skär handleden --- handen utgörs då av hudområdet på den
sida om handleden som cirkeln befinner sig på. Denna metod har vi dock
inte implementerat, varför vi kräver att den filmade bär
långärmad tröja. 
