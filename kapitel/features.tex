\documentclass[../rapport_MVEX01-11-05]{subfiles}
\begin{document}
\subsubsection{Egenskaper}
En Hidden Markov Model behöver observationer för att fungera; dessa
observationer kommer vi att identifiera med hjälp av klassificering av
nyckelbilder ur videon utifrån ett antal egenskaper vi identifierar
med hjälp av den binära hudkartan för motsvarande bild.

För att kunna applicera metoden även vid stora variationer --- olika
personer, avstånd till kameran, uppställningar osv. --- är det viktigt
att endast andvända egenskaper som är oberoende av sådana variabler.
Position och absolut storlek är exempel på egenskaper som inte bör
användas, eftersom dessa kan variera mycket även inom en specifik
gest. Hastighet kan räknas in i denna grupp men måste ändå användas
om rörelsegester ska kunna identifieras. Det är dock möjligt att på
olika sätt göra denna egenskap mer oberoende.

Många av egenskaperna som beskrivs här kan beräknas effektivt av
\MATLAB-kommandot \texttt{regionprops}.

\marginpar{Flytta runt egenskaperna så att de dyker upp i en logisk
ordning (definitionsmässigt etc). Rent allmänt bättre namn på allt
behövs också.}

\paragraph{Hausdorffavstånd}

Hausdorffavståndet mellan den bild man klassificerar och ett antal
lagrade och förklassificerade gester kan användas som en egenskap för
klassificering \cite{Nielsen04}. Måttet mäter i någon mening avståndet
mellan två punktmängder $A$ och $B$ (i detta fallet mängderna som definieras av
randen till våra handområden) och definieras av

\begin{equation*}
  H(A, B) = \max\left(h(A,B),h(B, A)\right)
\end{equation*}

där

\begin{equation*}
  h(A, B) = \max\limits_{a\in A}\min\limits_{b\in
  B}\left|\left|a-b\right|\right|.
\end{equation*}

Detta mått kan användas som egenskap endast om man har något att
jämföra med. Med en databas av referensbilder, sparade mängder $B_n$ från redan kända
och klassificerade gester, kan man skapa $n$ egenskaper bestående av
värdet $H(A,B_n)$, där $A$ är motsvarande mängd för bilden som för
tillfället klassificeras.

För att Hausdorffavståndet ska bli ett oberoende mått måste man
förbehandla bilden på ett lämpligt sätt. Genom att först rotera
handområdet enligt dess vinkel mot horisontalplanet (se nedan)
och sedan skala området så att det fyller ett
område på exempelvis $200\times200$ bildpunkter, utan hänsyn till
längd-bredd-förhållande, eliminerar man alla beroende variabler. Att
vinkeln elimineras trots att den har betydelse är irrelevant så länge
man inkluderar den som en separat egenskap.

Givetvis måste även refensbilden $B_n$ utsättas för likvärdig behandling.

\paragraph{Förflyttning}

Förflyttning är givetvis en grundläggande egenskap hos rörelsegester,
och kan definieras på två distinkta sätt: med hjälp av centroiden och
med hjälp av den inneslutande lådan.

\marginpar{Hur gör man dessa mer oberoende? Gör vi det? Behövs det?}

\subparagraph{Inneslutande låda}

Den inneslutande lådan är den minsta rektangeln som innehåller hela
objektet. Denna kan effektivt beräknas genom att lokalisera
extrempunkterna i $x$- och $y$-led, dvs. de punkter närmst kanterna
som är en del av objektet. Lådan har fyra egenskaper:
\begin{inparaenum}[\itshape 1\upshape)]
  \item bredd, $\textrm{Box}_w(A)$;
  \item höjd, $\textrm{Box}_h(A)$;
  \item position i $x$-led, $\textrm{Box}_x(A)$; och
  \item position i $y$-led, $\textrm{Box}_y(A)$.
\end{inparaenum}

Utifrån dessa kan vi även beräkna en femte och sjätte egenskap;
mittpunkten i $x$- och $y$-led:

\begin{gather*}
  \textrm{Box}_{cx}(A) = \textrm{Box}_x(A) + \textrm{Box}_w(A)/2\\
  \textrm{Box}_{cy}(A) = \textrm{Box}_y(A) + \textrm{Box}_h(A)/2
\end{gather*}

Dessa egenskaper kan vi sedan använda för att beräkna förflyttning i
$x$- och $y$-led:

\begin{gather*}
  \Delta (A^n) =
  \begin{pmatrix}
    \Delta x(A^n)\\[3pt]
    \Delta y(A^n)
  \end{pmatrix}
  =
  \begin{pmatrix}
    \textrm{Box}_{cx}(A^n) - \textrm{Box}_{cx}(A^{n-1})\\[3pt]
    \textrm{Box}_{cy}(A^n) - \textrm{Box}_{cy}(A^{n-1})
  \end{pmatrix}
\end{gather*}

\subparagraph{Centroid}

Centroiden är masscentrum för området, och beräknas enligt

\begin{equation*}
  \textrm{centroid}(A) = \left\lfloor\frac{
    \sum\limits_{a\in A}m_a\vec{r}_a
  }{
    \sum\limits_{a\in A}m_a
  }\right\rfloor =
  \left\lfloor\sum\limits_{a\in
  A}\frac{\vec{r}_a}{\textrm{Area}(A)}\right\rfloor,
\end{equation*}

där man använder att $m_a=1,\:\forall a\in A$ eftersom bilden är
binär ($m_a$ är helt enkelt intensiteten i punkten $a$ och
$\vec{r}_a$ är positionen av punkten $a$). Operatorn $\lfloor
x\rfloor$ avrundar $x$ nedåt till närmsta heltal.

Med denna beräkning utförd kan centroidförflyttningen definieras enligt

\begin{equation*}
  \Delta_c(A^n) = 
  \begin{pmatrix}
    \Delta x_c(A^n) \\[3pt]
    \Delta y_c(A^n)
   \end{pmatrix}
   = \left(\textrm{centroid}(A^n)-\textrm{centroid}(A^{n-1})\right)
\end{equation*}

där $A^n$ är den $n$:te nyckelbilden.

\paragraph{Vinkel}
\label{sss:vinkel}

Vinkeln mellan objektet och horisontalaxeln kan användas för att
beskriva handens rotation, och är ett viktigt mått för
gestigenkänning. Måttet definieras som vinkeln mellan horisontalaxeln
och den längsta av axlarna i den ellips som har samma andramoment som
området, och löper från $-90$\textdegree{} till $90$\textdegree{}.

\marginpar{Hur definieras andramomenten?}

\paragraph{Konvexitet}

Konvexitet \cite[s.~26]{Rudemo09} är ett användbart dimensionslöst
mått som i någon mening beskriver hur konvext ett objekt är --- för
gestigenkänning är detta ett relevant mått på huruvida fingrarna är
utsträckta eller inte, men även på om de sitter tätt ihop (ex.
stopptecken) eller löst konfigurerade (ex. segertecken). Det
definieras av

\begin{equation*}
  \textrm{konvexitet}(A) = \frac{\partial A_h}{\partial A}
\end{equation*}

där $A_h$ är det konvexa skalet till $A$ (dvs. det minsta konvexa område som
helt täcker $A$) och $\partial A$ betecknar randen till $A$ (i diskret
mening).

\paragraph{Kompakthet}

Kompakthet \cite[s.~26]{Rudemo09} är ännu ett dimensionslöst mått som
beskriver hur kompakt ett objekt är, dvs. hur ''rak'' områdets rand
är. Cirkeln är det mest kompakta objektet, ju fler irregulariteter
randen innehåller desto mindre blir kompaktheten. Kompakthet
definieras av

\begin{equation*}
  \textrm{kompakthet}(A) = \frac{\textrm{Area}(A)}{\left(\partial
  A\right)^2}.
\end{equation*}

\paragraph{Soliditet}

Soliditet är i någon mening ett mått på hur poröst ett objekt är. Det
definieras av ration mellan objektets area och det konvexa skalets
area enligt

\begin{equation*}
  \textrm{soliditet}(A) = \frac{\textrm{Area}(A)}{\textrm{Area}(A_h)},
\end{equation*}

och är därför dimensionslöst. Detta mått kan vara mycket hjälpsamt för
gester som t.ex.~''OK'' (en ring formad av tumme och pekfinger, med
övriga fingrar riktade uppåt).

Några?

\end{document} 

